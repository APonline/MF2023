
<div class="content mf-theme">
  <!-- dialog-box.component.html -->
  <h1><strong>{{action}} {{tool}}</strong></h1>
  <br/>

  <form>
    <div *ngIf="action != 'Delete'; else elseTemplate">
      <ul>
        <li *ngFor="let row of displayedColumns">
          <ng-container *ngIf="row != 'active' && row != 'action' && row != 'id' && row != 'date_joined' && row.indexOf('owner') === -1">
            <ng-container
              [ngTemplateOutlet]="row.indexOf('image') === -1 ? normalTemplate : uploaderTemplate"
              [ngTemplateOutletContext]="{ $implicit: row }">
            </ng-container>
          </ng-container>
        </li>
        <li *ngIf="uploaderInstalled">
          <ng-container
              [ngTemplateOutlet]="uploaderTemplate"
              [ngTemplateOutletContext]="{ $implicit: 'title' }">
            </ng-container>
        </li>
      </ul>
    </div>
    <ng-template #elseTemplate>
      Are you sure?
    </ng-template>
    <ng-template #normalTemplate let-row>
      <p><span>{{row | removeUnderscore}}</span></p>
      <div>
        <mat-form-field>
          <input matInput [(ngModel)]="local_data[0][row]">
        </mat-form-field>
      </div>
    </ng-template>
    <ng-template #uploaderTemplate let-row>
      <p><span *ngIf="row != 'title'">{{row | removeUnderscore}}</span></p>
      <div>
        <app-upload-single (fileNew)="updateUploadValue($event)" [field]="row" [file]="local_data[0][row]" [group]="currentGroup"></app-upload-single>
      </div>
    </ng-template>

    <div *ngIf="ownerFound">
      <p style="color:red;">This project exists, you may need an invite from the owner!</p>
      <div class="box">
        <div class="list" *ngFor="let user of userList">
          <div class="imgBox">
            <img *ngIf="user?.profile_image == 'default'; else hasImage" src="./assets/images/defaultprofile1.png"  />
              <ng-template #hasImage>
                <img src="{{ user?.display?.display}}" alt="{{ user?.display?.name}}" />
              </ng-template>
          </div>
          <div class="content">
            <!-- <h2 class="rank"><small>#</small>1</h2> -->
            <h4>{{user.username}}</h4>
            <p>{{user.email}}</p>
          </div>
        </div>
      </div>
    </div>

    <div mat-dialog-actions>
      <button (click)="doAction()" mat-raised-button color="primary">{{action}}</button>
      <button (click)="closeDialog()" mat-raised-button color="accent">Cancel</button>
    </div>
  </form>
</div>
